{"version":3,"file":"QuadSourceComposite.js","sourceRoot":"","sources":["QuadSourceComposite.ts"],"names":[],"mappings":";;;AACA,mCAAqC;AAIrC;;;;GAIG;AACH,MAAa,mBAAmB;IAG9B,YAAmB,OAAsB;QACvC,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;IACzB,CAAC;IAEM,QAAQ;QACb,MAAM,MAAM,GAAG,IAAI,oBAAW,CAAC,EAAE,UAAU,EAAE,IAAI,EAAE,CAAC,CAAC;QACrD,IAAI,YAAY,GAAG,CAAC,CAAC;QACrB,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC,OAAO,EAAE;YACjC,MAAM,MAAM,GAAG,MAAM,CAAC,QAAQ,EAAE,CAAC;YACjC,MAAM,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,CAAC,CAAC;YACpC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,KAAK,CAAC,EAAE,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC,CAAC;YACzD,2DAA2D;YAC3D,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,GAAG,EAAE;gBACpB,IAAI,EAAE,YAAY,KAAK,IAAI,CAAC,OAAO,CAAC,MAAM,EAAE;oBAC1C,MAAM,CAAC,GAAG,EAAE,CAAC;iBACd;YACH,CAAC,CAAC,CAAC;SACJ;QAED,uCAAuC;QACvC,IAAI,IAAI,CAAC,OAAO,CAAC,MAAM,KAAK,CAAC,EAAE;YAC7B,MAAM,CAAC,GAAG,EAAE,CAAC;SACd;QAED,OAAO,MAAM,CAAC;IAChB,CAAC;CACF;AA7BD,kDA6BC","sourcesContent":["import type { Readable } from 'stream';\nimport { PassThrough } from 'stream';\nimport type * as RDF from '@rdfjs/types';\nimport type { IQuadSource } from './IQuadSource';\n\n/**\n * A quad source that combines multiple quad sources.\n *\n * Concretely, this will create a concatenated stream of all the given sources streams.\n */\nexport class QuadSourceComposite implements IQuadSource {\n  private readonly sources: IQuadSource[];\n\n  public constructor(sources: IQuadSource[]) {\n    this.sources = sources;\n  }\n\n  public getQuads(): RDF.Stream & Readable {\n    const concat = new PassThrough({ objectMode: true });\n    let endedStreams = 0;\n    for (const source of this.sources) {\n      const stream = source.getQuads();\n      stream.pipe(concat, { end: false });\n      stream.on('error', error => concat.emit('error', error));\n      // eslint-disable-next-line @typescript-eslint/no-loop-func\n      stream.on('end', () => {\n        if (++endedStreams === this.sources.length) {\n          concat.end();\n        }\n      });\n    }\n\n    // Special case when we have no sources\n    if (this.sources.length === 0) {\n      concat.end();\n    }\n\n    return concat;\n  }\n}\n"]}